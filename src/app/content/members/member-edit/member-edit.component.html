<div class="main-box" *ngIf="member">
  <div class="row">
    <div class="col col-lg-12 col-xl-12">
      <section class="h-100 gradient-custom-2">
        <div class="container py-5 h-100" *ngIf="member">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col col-lg-12 col-xl-12">
              <div class="card">
                <div class="p-4 text-black" style="background-color: #f8f9fa;">
                    <div class="profile">
                      <div class="profile-info">
                        <img src="{{member.photoUrl || './assets/user.png'}}" alt="{{member.knownAs}}"
                              class="img-fluid img-thumbnail mb-3">
                        <div class="profile-name">
                            <h4>{{member.userName}}</h4>
                            <p>{{member.knownAs}}</p>
                          </div>
                      </div>
                      <div class="edit-profile">
                        <button class="btn btn-outline-dark edit-btn" data-mdb-ripple-color="dark" (click)="openEditModal(editModal)">
                          Edit profile
                        </button>
                        <div class="d-flex justify-content-end text-center py-1 mr-3">
                          <div>
                            <p class="mb-1 h5">253</p>
                            <p class="small text-muted mb-0">Photos</p>
                          </div>
                          <div class="px-3">
                            <p class="mb-1 h5">1026</p>
                            <p class="small text-muted mb-0">Followers</p>
                          </div>
                          <div>
                            <p class="mb-1 h5">478</p>
                            <p class="small text-muted mb-0">Following</p>
                          </div>
                        </div>
                        <ng-template #editModal #updateIntroTemplate >
                          
                          <div class="modal-body">
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="modalRef.hide()"></button>
                              <tabset class="member-tabset">
                                
                                <tab heading="Edit Introduction">
                                  
                                      
                                        <form class="form" [formGroup]="updateIntroForm" (ngSubmit)="updateIntroduction()">
                                            <div class="form-group">
                                                <label for="introduction">Introduction</label>
                                                <div class="alert alert-info pb-0" *ngIf="updateIntroForm.dirty">
                                                    <p><strong>Information: </strong>You have made changes. Any unsaved changes will
                                                        be lost</p>
                                                </div>
                                                <textarea id="introduction" class="form-control" formControlName="introduction"
                                                    required></textarea>
                                            </div>
                                            <button type="submit" class="btn-update"
                                                [disabled]="!updateIntroForm.valid || !updateIntroForm.dirty">
                                                Update
                                            </button>
                                        
                                        </form>
                                          
                                </tab>                            
                                <tab heading="Edit Looking For">
                                  <app-edit-lookingfor (interestAdded)="reloadData()"></app-edit-lookingfor>
                              </tab>
                              <tab heading="Edit Interest">
                                  <app-edit-interest (interestAdded)="reloadData()"></app-edit-interest>
                              </tab>
                              <tab heading="Edit Photos">
                                  <app-photo-editor [member]="member"></app-photo-editor>
                              </tab>
                              </tabset>
                          </div>
                        </ng-template>       
                        </div>
                    </div>
                </div>
                <div class="card-body p-4 text-black">
                  <div class="mb-5">
                    <p class="lead fw-normal mb-1">About</p>
                    <div class="p-4" style="background-color: #f8f9fa;">
                        <div class="profile-detail">
                            <strong><span class="icon">üôç</span>Fullname:</strong>
                            <p>{{member.fullName}}</p>
                        </div>
                        <div class="profile-detail">
                            <strong><span class="icon">üìç</span>Location:</strong>
                            <p>{{member.city}}</p>
                        </div>
                        <div class="profile-detail">
                            <strong><span class="icon">üéÇ</span>Age:</strong>
                            <p>{{member.age}}</p>
                        </div>
                        <div class="profile-detail">
                            <strong><span class="icon">‚ößÔ∏è</span>Gender:</strong>
                            <p>{{member.gender}}</p>
                        </div>
                        <div class="profile-detail">
                            <strong><span class="icon">üîç</span>Looking fors:</strong>
                            <li *ngFor="let lookingFor of member.lookingFors">{{lookingFor.name}}
                                <button (click)="deleteLookingFor(lookingFor.id)">Delete</button>
                            </li>
                        </div>
                        <div>
                            <strong><span class="icon">üí¨</span>Introduction:</strong>
                            <p style="text-align: justify; text-justify: inter-word;">{{member.introduction}}</p>
                        </div>
                        <div class="profile-detail">
                            <strong><span class="icon">üìÖ</span>Member since:</strong>
                            <p>{{member.created | date: 'dd MMM yyyy'}}</p>
                        </div>
                        <div class="profile-detail">
                            <strong><span class="icon">üï∞Ô∏è</span>Last active:</strong>
                            <p>{{member.lastActive | timeago}}</p>
                        </div>
                        <div class="profile-detail">
                            <strong><span class="icon">üåÜ</span>City:</strong>
                            <p>{{member.city}}</p>
                        </div>
                        <div class="profile-detail">
                            <strong><span class="icon">üåü</span>Interests:</strong>
                            <li *ngFor="let interest of member.interests">{{interest.name}}
                                <button (click)="deleteInterest(interest.id)">Delete</button>
                            </li>                  
                        </div>            
                    </div>
                  </div>
                  <div class="profile-btn">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="visibilitySwitch" [(ngModel)]="isVisible"
                                    (ngModelChange)="setVisibility($event)">
                                <label class="form-check-label" for="visibilitySwitch">Visibility</label>
                            </div>
                            <button (click)="deleteAccount()" class="btn btn-danger">Delete Account</button>
                        </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>