<div class="chat-list-container">
    <div class="chat-list-sidebar">
        <div class="header-icons">
            <button (click)="loadAllMessages()"><i class="fa fa-comment icon-messenger"></i></button>
            <button><i class="fa fa-cog icon-settings"></i></button>
            <button><i class="fa fa-users"></i></button>
            <button><i class="fa fa-archive"></i></button>
        </div>
        <div class="chat-list-header">
            <div class="profile-image" *ngIf="(accountService.currentUser$  | async) as user">
                <img src="{{user.photoUrl || './assets/user.png'}}" alt="user photo" routerLink="/member/edit" />
            </div>
        </div>
    </div>
    <div class="chat-list-main">
        <div class="chat-list-title">
            <h4>Chat</h4>
        </div>
        <div class="chat-list" *ngFor="let message of connectedMessage">
            <div class="chat-item">
                <div class="chat-avatar">
                    <img src="{{message.photoUrl || './assets/user.png'}}" alt="Chat Avatar" />
                </div>
                <div class="chat-info">
                    <div class="chat-name">{{message.fullName | titlecase}}</div>
                    <div class="chat-preview">{{message.lastMessage}}</div>
                </div>
                <div class="chat-time">{{message.messageSent | timeago}}</div>
            </div>
        </div>
        <div class="row" *ngIf="!connectedMessage || connectedMessage.length === 0">
            <h3>No messages</h3>
        </div>
    </div>
    <div class="d-flex justify-content-center"
        *ngIf="!loading && pagination && connectedMessage && connectedMessage.length > 0">
        <pagination [boundaryLinks]="true" [totalItems]="pagination.totalItems" [itemsPerPage]="pagination.itemsPerPage"
            [maxSize]="10" [(ngModel)]="pagination.currentPage" (pageChanged)="pageChanged($event)"
            previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;">
        </pagination>
    </div>
</div>






















































<!-- <div class="container">
    <div class="messages-btn-group">
            <button class="btn btn-primary Unread-btn" btnRadio="Unread" [(ngModel)]="container" (click)="loadMessages()">
                <i class="fa fa-envelope"></i> Unread
            </button>
            <button class="btn btn-primary Inbox-btn" btnRadio="Inbox" [(ngModel)]="container" (click)="loadMessages()">
                <i class="fa fa-envelope-open"></i> Inbox
            </button>
            <button class="btn btn-primary Outbox-btn" btnRadio="Outbox" [(ngModel)]="container" (click)="loadMessages()">
                <i class="fa fa-paper-plane"></i> Outbox
            </button>
            <tabset>
                <tab heading="Member connected">
                    <app-member-connected></app-member-connected>
                </tab>
            </tabset>
    </div>
    <div class="row" *ngIf="!messages || messages.length === 0">
        <h3>No messages</h3>
    </div>

    <div class="row" *ngIf="messages && messages.length > 0">
        <table class="table table-hover" style="cursor: pointer;">
            <thead>
                <tr>
                    <th style="width: 40%">Message</th>
                    <th style="width: 20%">From / To</th>
                    <th style="width: 20%">Sent / Received</th>
                    <th style="width: 20%"></th>
                </tr>
            </thead>
            <tbody class="align-middle">
                <tr [hidden]="loading" *ngFor="let message of messages" routerLink="{{container === 'Outbox' 
                        ? '/members/' + message.recipientUsername 
                        : '/members/' + message.senderUsername}}" [queryParams]="{tab: 'Messages'}">
                    <td>{{message.content}}</td>
                    <td>
                        <div *ngIf="container === 'Outbox'">
                            <img class="img-circle rounded-circle me-2"
                                src="{{message.recipientPhotoUrl || './assets/user.png'}}" alt="recipient photo">
                            <strong>{{message.recipientUsername | titlecase}}</strong>
                        </div>
                        <div *ngIf="container !== 'Outbox'">
                            <img class="img-circle rounded-circle me-2"
                                src="{{message.senderPhotoUrl || './assets/user.png'}}" alt="recipient photo">
                            <strong>{{message.senderUsername | titlecase}}</strong>
                        </div>
                    </td>

                    <td>
                        <button (click)="$event.stopPropagation()" (click)="deleteMessage(message.id)"
                            class="btn btn-danger">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="d-flex justify-content-center" *ngIf="!loading && pagination && messages && messages.length > 0">
        <pagination [boundaryLinks]="true" [totalItems]="pagination.totalItems" [itemsPerPage]="pagination.itemsPerPage"
            [maxSize]="10" [(ngModel)]="pagination.currentPage" (pageChanged)="pageChanged($event)" previousText="&lsaquo;"
            nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;">
        </pagination>
    </div>
</div> -->